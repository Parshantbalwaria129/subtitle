(function(){"use strict";var t={6294:function(t,e,i){var s=i(9242),l=i(3396);function a(t,e,i,s,a,n){const o=(0,l.up)("NavBar"),r=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[this.$store.state.isEditorView?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(o,{key:0})),(0,l.Wm)(r,{style:{"flex-grow":"1"}})],64)}var n=i.p+"img/2.22f6eb56.png";const o={class:"nav"},r={class:"left-nav"},d={href:"/",class:"d-inline-flex text-decoration-none"},u=(0,l._)("img",{src:n,width:"40",height:"32",alt:"Seek Sub"},null,-1),c={class:"right-nav"};function h(t,e,i,s,a,n){const h=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[(0,l._)("a",d,[(0,l.Wm)(h,{class:"navlink",to:"/"},{default:(0,l.w5)((()=>[u])),_:1})])]),(0,l._)("div",c,[(0,l.Wm)(h,{class:"navlink",to:"/"},{default:(0,l.w5)((()=>[(0,l.Uk)("Home")])),_:1}),(0,l.Wm)(h,{class:"navlink",to:"/about"},{default:(0,l.w5)((()=>[(0,l.Uk)("about")])),_:1})])])}var m={name:"NavBar"},b=i(89);const p=(0,b.Z)(m,[["render",h]]);var S=p,f={name:"App",data(){return{isEditorView:!1,currentRout:null}},components:{NavBar:S},beforeCreate(){this.$store.commit("initializeStore")},watch:{"$route.path"(t){"/editor"===t?this.$store.commit("setIsEditorView",!0):this.$store.commit("setIsEditorView",!1)}}};const v=(0,b.Z)(f,[["render",a]]);var g=v,F=i(2483);function w(t,e,i,s,a,n){const o=(0,l.up)("VideoUpload");return(0,l.wg)(),(0,l.j4)(o)}const T={class:"container-xxl bd-gutter"},y={class:"col-md-8 mx-auto text-center"},C=(0,l._)("img",{class:"web-logo",src:n,alt:"Seek Sub"},null,-1),_=(0,l._)("h1",{class:"mb-3 fw-semibold lh-1"},"Let create some subtitles",-1),I=(0,l._)("p",{class:"lead mb-4"}," Create, Edit, and Perfect Subtitles with Ease ",-1),x={class:"input-group mb-3"},D={class:"input-group-text btn btn-lg btn-primary mx-auto",for:"VideoFileInput"},k=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-plus-circle-fill",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"})],-1);function $(t,e,i,s,a,n){return(0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("div",y,[C,_,I,(0,l._)("div",x,[(0,l._)("label",D,[k,(0,l.Uk)(" Upload Video "),(0,l._)("input",{type:"file",id:"VideoFileInput",hidden:"",onChange:e[0]||(e[0]=(...t)=>n.handleFileChange&&n.handleFileChange(...t))},null,32)])])])])}i(6229),i(7330),i(2062),i(7658);var U={name:"VideoUpload",data(){return{selectedVideoFile:null,videoDuration:null,videoURL:null}},methods:{loadVideoAndGetDuration(t){return new Promise(((e,i)=>{const s=document.createElement("video");s.preload="metadata",s.onloadedmetadata=()=>{const t=s.duration;s.src="",isNaN(t)?i(new Error("Video Duratrion is not available")):e(t)},s.onerror=()=>{s.src="",i(new Error("Failed to load video"))},s.src=URL.createObjectURL(t)}))},handleFileChange(t){const e=t.target.files[0],i=["mp4","avi","mkv","mov"],s=e.type.split("/").pop().toLowerCase();if(i.includes(s)){if(e.size>2048e6)return void alert("File size exceed 2GB, please select a smaller file");this.loadVideoAndGetDuration(e).then((i=>{this.videoURL=URL.createObjectURL(t.target.files[0]);const s={name:e.name,size:e.size,url:this.videoURL,duration:i};console.log(s.url),this.$store.commit("setVideoFile",s),this.$router.push("/editor")})).catch((t=>{console.log(t)}))}}}};const V=(0,b.Z)(U,[["render",$]]);var L=V,A={name:"HomeView",components:{VideoUpload:L},mounted(){console.log("home page")}};const B=(0,b.Z)(A,[["render",w]]);var M=B;const O=(0,l._)("h1",null,"About Page",-1),N=(0,l._)("p",null,"Welcome to the About Page!",-1),E=[O,N];function z(t,e,i,s,a,n){return(0,l.wg)(),(0,l.iD)("div",null,E)}var H={name:"AboutView"};const R=(0,b.Z)(H,[["render",z]]);var P=R,j=i(7139);const W={class:"modal fade",id:"downloadSubtitleModel",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Z={class:"modal-dialog"},q={class:"modal-content"},G=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Download Subtitle "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Y={class:"modal-body"},J={class:"form-floating"},K=["placeholder"],Q={class:"subtitle-file-name-label",for:"floatingInput"},X={class:"modal-footer"},tt=(0,l._)("button",{type:"button",class:"btn btn-dark cancel-btn","data-bs-dismiss":"modal"}," Cancel ",-1),et=["onClick"],it={class:"main-container"},st={class:"top-container"},lt={class:"left-container"},at={class:"back-to-home"},nt={class:"video-container"},ot={class:"ratio ratio-16x9"},rt=["src"],dt={key:0,class:"subtitle-display"},ut={class:"subtitle-text"},ct={class:"right-container"},ht=(0,l._)("div",{class:"top-subtitle-container"},[(0,l._)("h2",null,"Add subtitle here")],-1),mt={class:"bottom-subtitle-container"},bt={class:"bottom-container"},pt={class:"toolbar"},St={class:"left-toolbar"},ft={class:"back-to-home"},vt={class:"btn btn-sm btn-dark",title:"Go back"},gt=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"})],-1),Ft={class:"add-subtitle"},wt={class:"btn btn-sm btn-dark",for:"subtitleFileInput",title:"Upload subtitle"},Tt=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-file-earmark-arrow-up",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707V11.5z"}),(0,l._)("path",{d:"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"})],-1),yt=(0,l.uE)('<div class="download-subtitle"><label class="btn btn-sm btn-dark" title="Download Subtitle"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-arrow-down" viewBox="0 0 16 16"><path d="M8.5 6.5a.5.5 0 0 0-1 0v3.793L6.354 9.146a.5.5 0 1 0-.708.708l2 2a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 10.293V6.5z"></path><path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"></path></svg><button type="button" data-bs-toggle="modal" data-bs-target="#downloadSubtitleModel" hidden></button></label></div>',1),Ct={class:"center-toolbar"},_t={class:"right-toolbar"},It={class:"save-subtitle"},xt={class:"btn btn-sm btn-dark",title:"Save"},Dt=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-floppy",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11 2H9v3h2V2Z"}),(0,l._)("path",{d:"M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0ZM1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5Zm3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4v4.5ZM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5V15Z"})],-1),kt={class:"dropdown"},$t=(0,l._)("button",{class:"btn btn-dark dropdown-toggle",type:"button",id:"dropdownMenu","data-bs-toggle":"dropdown","aria-expanded":"false"}," Sort by ",-1),Ut={class:"dropdown-menu","aria-labelledby":"dropdownMenu",fill:"currentColor"},Vt={class:"main-scale"},Lt={class:"scale-container",ref:"scaleContainer"},At={class:"scale"},Bt=(0,l._)("div",{class:"mili-second-unit"},null,-1),Mt=[Bt],Ot={class:"second-unit-text"},Nt=(0,l._)("div",{class:"cst-pointer"},[(0,l._)("div",{class:"cst-pointer-triangle"}),(0,l._)("div",{class:"cst-pointer-line"})],-1),Et={class:"scale-subtitle"},zt=["onFocusin","onFocusout"],Ht=["onUpdate:modelValue"];function Rt(t,e,i,a,n,o){const r=(0,l.up)("SubtitleCard"),d=(0,l.Q2)("drag");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",W,[(0,l._)("div",Z,[(0,l._)("div",q,[G,(0,l._)("div",Y,[(0,l._)("div",J,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:n.subtitleFileName,"onUpdate:modelValue":e[0]||(e[0]=t=>n.subtitleFileName=t)},null,8,K),[[s.nr,n.subtitleFileName]]),(0,l._)("label",Q,(0,j.zw)(n.subtitleFileName),1)])]),(0,l._)("div",X,[tt,(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal",onClick:o.downloadSubtitleFile}," Download ",8,et)])])])]),(0,l._)("div",it,[(0,l._)("div",st,[(0,l._)("div",lt,[(0,l._)("div",at,[(0,l._)("button",{type:"button",className:"btn-close","aria-label":"Close",title:"Go back",onClick:e[1]||(e[1]=(...t)=>o.backToHome&&o.backToHome(...t))})]),(0,l._)("div",nt,[(0,l._)("div",ot,[(0,l._)("video",{ref:"videoPlayer",class:"video-player",preload:"metadata",src:this.videoURL,autoplay:"",loop:"",controls:"",controlslist:"nodownload nofullscreen"},null,8,rt)]),n.subtitleAvailable?((0,l.wg)(),(0,l.iD)("div",dt,[(0,l._)("div",ut,(0,j.zw)(n.currentSubtitle),1)])):(0,l.kq)("",!0)])]),(0,l._)("div",ct,[ht,(0,l._)("div",mt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.subtitleFile,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{class:"subtitle-forloop",key:e},[(0,l.Wm)(r,{index:e,cardData:t,currentFocusedCardId:n.currentFocusedCardId,onAddNextCard:o.addNextCard,onDeleteCurrentCard:o.deleteCurrentCard,"onUpdate:startTimeStamp":o.updateStartTimestamp,"onUpdate:endTimeStamp":o.updateEndTimestamp,"onUpdate:subtitle":o.updateSubtitle,onSetFocusOut:o.setFocusOut,onSetFocusIn:o.setFocusIn},null,8,["index","cardData","currentFocusedCardId","onAddNextCard","onDeleteCurrentCard","onUpdate:startTimeStamp","onUpdate:endTimeStamp","onUpdate:subtitle","onSetFocusOut","onSetFocusIn"])])))),128)),(0,l._)("div",{class:"subtitle-add-container",onClick:e[2]||(e[2]=(...t)=>o.addNewCard&&o.addNewCard(...t))}," Add Subtitle ")])])]),(0,l._)("div",bt,[(0,l._)("div",pt,[(0,l._)("div",St,[(0,l._)("div",ft,[(0,l._)("label",vt,[gt,(0,l._)("button",{type:"button",hidden:"",onClick:e[3]||(e[3]=(...t)=>o.backToHome&&o.backToHome(...t))})])]),(0,l._)("div",Ft,[(0,l._)("label",wt,[Tt,(0,l._)("input",{type:"file",id:"subtitleFileInput",hidden:"",onChange:e[4]||(e[4]=(...t)=>o.UploadSubtitleFile&&o.UploadSubtitleFile(...t))},null,32)])]),yt]),(0,l._)("div",Ct,[(0,l.wy)((0,l._)("input",{type:"range",class:"form-range",min:"50",max:"150",step:"10","onUpdate:modelValue":e[5]||(e[5]=t=>o.changeViewScaleSize=t),id:"customRange"},null,512),[[s.nr,o.changeViewScaleSize]])]),(0,l._)("div",_t,[(0,l._)("div",It,[(0,l._)("label",xt,[Dt,(0,l._)("button",{type:"button",hidden:"",onClick:e[6]||(e[6]=(...t)=>o.saveSubtitles&&o.saveSubtitles(...t))})])]),(0,l._)("div",kt,[$t,(0,l._)("ul",Ut,[(0,l._)("li",null,[(0,l._)("button",{class:"dropdown-item",type:"button",onClick:e[7]||(e[7]=t=>o.sortByClick("start"))}," Start Time ")]),(0,l._)("li",null,[(0,l._)("button",{class:"dropdown-item",type:"button",onClick:e[8]||(e[8]=t=>o.sortByClick("end"))}," End Time ")]),(0,l._)("li",null,[(0,l._)("button",{class:"dropdown-item",type:"button",onClick:e[9]||(e[9]=t=>o.sortByClick("sub"))}," Subtitle ")])])])])]),(0,l._)("div",Vt,[(0,l._)("div",Lt,[(0,l._)("div",At,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.scaleSeconds,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{class:"scale-second-loop",key:e},[(0,l._)("div",{class:"second-unit",ref_for:!0,ref:"subtitleUnit",style:(0,j.j5)(o.secondUnitStyle)},[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(10,((t,e)=>(0,l._)("div",{class:"mili-second-loop",key:e},Mt))),64))],4),(0,l._)("div",Ot,(0,j.zw)(t),1)])))),128)),Nt]),(0,l._)("div",Et,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.subtitleFile,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{class:"subtitle-loop",ref_for:!0,ref:"subtitleContainer",key:e,style:(0,j.j5)({left:`${t.left}px`,width:`${t.width}px`}),onFocusin:()=>o.setFocusIn(t.subtitleId),onFocusout:()=>o.setFocusOut(t.subtitleId)},[(0,l.wy)((0,l._)("textarea",{class:(0,j.C_)(["subtitle-text",{focus:o.checkFocus(t.subtitleId)}]),"onUpdate:modelValue":e=>t.subtitle=e,rows:"2"},null,10,Ht),[[s.nr,t.subtitle]])],44,zt)))),128)),(0,l.wy)((0,l._)("div",{class:"left-handle",style:(0,j.j5)({left:o.computeLeftHandle}),onVDragMoving:e[10]||(e[10]=(...t)=>o.leftDragMoving&&o.leftDragMoving(...t)),onVDragStart:e[11]||(e[11]=(...t)=>o.leftDragStart&&o.leftDragStart(...t)),onVDragEnd:e[12]||(e[12]=(...t)=>o.leftDragEnd&&o.leftDragEnd(...t))},null,36),[[d,{axis:"x"}]]),(0,l.wy)((0,l._)("div",{class:"right-handle",style:(0,j.j5)({left:o.computeRightHandle}),onVDragMoving:e[13]||(e[13]=(...t)=>o.rightDragMoving&&o.rightDragMoving(...t)),onVDragStart:e[14]||(e[14]=(...t)=>o.rightDragStart&&o.rightDragStart(...t)),onVDragEnd:e[15]||(e[15]=(...t)=>o.rightDragEnd&&o.rightDragEnd(...t))},null,36),[[d,{axis:"x"}]])])],512)])])])])}const Pt=["onFocusin","onFocusout"],jt={class:"subtitle-time-stamp-container"},Wt={class:"subtitle-container"},Zt={class:"subtitle-button-container"},qt=(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),Gt=(0,l._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"},null,-1),Yt=[qt,Gt],Jt=(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),Kt=(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"},null,-1),Qt=[Jt,Kt];function Xt(t,e,i,a,n,o){return(0,l.wg)(),(0,l.iD)("div",{class:(0,j.C_)(["subtitle-item-container",{focus:o.isFocused}]),onFocusin:o.setFocusIn,onFocusout:o.setFocusOut},[(0,l._)("div",jt,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.startTimeStamp=t),type:"text",pattern:"[0-9]*"},null,512),[[s.nr,o.startTimeStamp]]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.endTimeStamp=t),type:"text",pattern:"[0-9]*"},null,512),[[s.nr,o.endTimeStamp]])]),(0,l._)("div",Wt,[(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.subtitle=t),placeholder:"New Subtitle",rows:"2"},null,512),[[s.nr,o.subtitle]])]),(0,l._)("div",Zt,[((0,l.wg)(),(0,l.iD)("svg",{onClick:e[3]||(e[3]=(...t)=>o.deleteCard&&o.deleteCard(...t)),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle",viewBox:"0 0 16 16"},Yt)),((0,l.wg)(),(0,l.iD)("svg",{onClick:e[4]||(e[4]=(...t)=>o.addCard&&o.addCard(...t)),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16"},Qt))])],42,Pt)}var te={name:"SubtitleCard",data(){return{}},props:["index","cardData","currentFocusedCardId"],mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},computed:{isFocused(){return this.cardData.subtitleId===this.currentFocusedCardId},startTimeStamp:{get(){return this.cardData.startTimeStamp},set(t){this.$emit("update:startTimeStamp",t,this.cardData.subtitleId)}},endTimeStamp:{get(){return this.cardData.endTimeStamp},set(t){this.$emit("update:endTimeStamp",t,this.cardData.subtitleId)}},subtitle:{get(){return this.cardData.subtitle},set(t){this.$emit("update:subtitle",t,this.cardData.subtitleId)}}},methods:{addCard(){this.$emit("addNextCard",this.cardData.subtitleId)},deleteCard(){this.$emit("deleteCurrentCard",this.cardData.subtitleId)},setFocusIn(){this.$emit("setFocusIn",this.cardData.subtitleId)},setFocusOut(){this.$emit("setFocusOut",this.cardData.subtitleId)}}};const ee=(0,b.Z)(te,[["render",Xt]]);var ie=ee,se=i(3029),le={name:"EditorView",components:{SubtitleCard:ie},props:["fileURL"],data(){return{videoURL:null,subtitleFile:null,currentSubtitle:"",subtitleAvailable:!1,currentFocusedCardId:null,isFocused:!0,selectedSubtitleFile:null,subtitleFileName:"",sortBy:{field:"start",order:"asc"},scaleSeconds:[],viewSecondsSizeOnScale:100,videoDuration:0,scaleSubtitleCard:[],startTimeNewLeft:null,endTimeNewLeft:null,leftHandleVisible:!1,rightHandleVisible:!1,sliderValue:100,leftHandleDown:!1,rightHandleDown:!1}},computed:{computeLeftHandle(){try{const t=this.subtitleFile.find((t=>t.subtitleId===this.currentFocusedCardId));return this.leftHandleDown?"0px":t.left-3+"px"}catch{}return"0px"},computeRightHandle(){try{const t=this.subtitleFile.find((t=>t.subtitleId===this.currentFocusedCardId));return this.rightHandleDown?"0px":t.left+t.width-3+"px"}catch{}return"0px"},changeViewScaleSize:{get(){return this.viewSecondsSizeOnScale},set(t){this.viewSecondsSizeOnScale=parseInt(t),this.subtitleFile.forEach((t=>{const e=this.updateLeftAndWidth(t.startTimeStamp,t.endTimeStamp);t.left=e.left,t.width=e.width})),this.$utils.updateFile(this.subtitleFile)}},checkFocus(){return t=>null!==this.currentFocusedCardId&&this.currentFocusedCardId===t},secondUnitStyle(){return{width:`${this.viewSecondsSizeOnScale}px`}}},methods:{setCstPointer(t){const e=document.querySelector(".cst-pointer-triangle"),i=document.querySelector(".cst-pointer-line");e.style.left=t-4+"px",i.style.left=`${t}px`},leftDragStart(){try{this.leftHandleDown=!0}catch{}},leftDragMoving(t){try{const e=window.getComputedStyle(t.srcElement).transform,i=e.split(","),s=parseInt(i[4]),l=this.$refs.videoPlayer,a=this.pixelToTime(s);l.currentTime=a,l.play();const n=this.pixelToTimeStamp(s),o=this.subtitleFile.find((t=>t.subtitleId===this.currentFocusedCardId));o.startTimeStamp=n;const r=o.left-s;o.left=s,o.width=o.width+r,this.setCstPointer(o.left-7)}catch{}},leftDragEnd(){const t=document.querySelector(".left-handle");t.style.left=`${this.computeLeftHandle}`;try{this.leftHandleDown=!1,this.$utils.updateFile(this.subtitleFile)}catch{}},rightDragStart(){try{this.rightHandleDown=!0}catch{}},rightDragMoving(t){try{const e=window.getComputedStyle(t.srcElement).transform,i=e.split(","),s=parseInt(i[4]),l=this.$refs.videoPlayer,a=this.pixelToTime(s);l.currentTime=a,l.play();const n=this.pixelToTimeStamp(s),o=this.subtitleFile.find((t=>t.subtitleId===this.currentFocusedCardId));o.endTimeStamp=n,o.width=s-o.left+3,this.setCstPointer(o.left+o.width-9)}catch{}},rightDragEnd(){const t=document.querySelector(".right-handle");t.style.left=`${this.computeRightHandle}`,this.rightHandleDown=!1,this.$utils.updateFile(this.subtitleFile)},setHandleStyle(){try{if(null!==this.currentFocusedCardId){const t=document.querySelector(".left-handle"),e=document.querySelector(".right-handle"),i=this.subtitleFile.find((t=>t.subtitleId===this.currentFocusedCardId));t.style.left=i.left-3+"px",e.style.left=i.left+i.width-3+"px"}}catch{}},applyshorting(){"start"===this.sortBy.field&&"asc"===this.sortBy.order?this.subtitleFile.sort(((t,e)=>this.timeStampToTimeUnit(t.startTimeStamp)-this.timeStampToTimeUnit(e.startTimeStamp))):"start"===this.sortBy.field&&"dsc"===this.sortBy.order?this.subtitleFile.sort(((t,e)=>this.timeStampToTimeUnit(e.startTimeStamp)-this.timeStampToTimeUnit(t.startTimeStamp))):"end"===this.sortBy.field&&"asc"===this.sortBy.order?this.subtitleFile.sort(((t,e)=>this.timeStampToTimeUnit(t.endTimeStamp)-this.timeStampToTimeUnit(e.endTimeStamp))):"end"===this.sortBy.field&&"dsc"===this.sortBy.order?this.subtitleFile.sort(((t,e)=>this.timeStampToTimeUnit(e.endTimeStamp)-this.timeStampToTimeUnit(t.endTimeStamp))):"sub"===this.sortBy.field&&"asc"===this.sortBy.order?this.subtitleFile.sort(((t,e)=>t.subtitle.length-e.subtitle.length)):"sub"===this.sortBy.field&&"dsc"===this.sortBy.order&&this.subtitleFile.sort(((t,e)=>e.subtitle.length-t.subtitle.length))},sortByClick(t){"start"===t&&"start"===this.sortBy.field?"asc"===this.sortBy.order?this.sortBy.order="dsc":this.sortBy.order="asc":"start"===t&&"start"!==this.sortBy.field?(this.sortBy.field="start",this.sortBy.order="asc"):"end"===t&&"end"===this.sortBy.field?"asc"===this.sortBy.order?this.sortBy.order="dsc":this.sortBy.order="asc":"end"===t&&"end"!==this.sortBy.field?(this.sortBy.field="end",this.sortBy.order="asc"):"sub"===t&&"sub"===this.sortBy.field?"asc"===this.sortBy.order?this.sortBy.order="dsc":this.sortBy.order="asc":"sub"===t&&"sub"!==this.sortBy.field&&(this.sortBy.field="sub",this.sortBy.order="asc"),this.applyshorting()},UploadSubtitleFile(t){const e=t.target.files[0],i=["srt"],s=e.name.split(".").pop().toLowerCase();i.includes(s)?(this.selectedSubtitleFile=t.target.files[0],this.subtitleFileName=this.selectedSubtitleFile.name,this.readSubtitleFile()):alert("Invalid file formate. Please enter a valid file.")},timeUnitToTimeStamp(t){try{const e=t.toString().split(/\.|,/);let i=e[1]||"000";i=i.padEnd(3,"0").substring(0,3);const s=parseInt(e[0]),l=Math.floor(s/3600),a=Math.floor(s%3600/60),n=s%60;if("00:00:00:000"===this.timeFormat){const t=`${String(l).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(n).padStart(2,"0")}:${i}`;return t}{const t=`${String(a).padStart(2,"0")}:${String(n).padStart(2,"0")}:${i}`;return t}}catch{}},timeStampToTimeUnit(t){if("00:00:00:000"==this.timeFormat){const[e,i,s,l]=t.split(":").map(Number);return 3600*e+60*i+s+l/1e3}{const[e,i,s]=t.split(":").map(Number);return 60*e+i+s/1e3}},replaceDotAndComma(t){try{const e=t.replace(".",":"),i=e.replace(",",":");return"00:00:00:000"===this.timeFormat?i.substring(0,12):i.substring(0,9)}catch{}},pixelToTime(t){const e=(t-10)/this.viewSecondsSizeOnScale;return e},pixelToTimeStamp(t){const e=this.pixelToTime(t);return this.timeUnitToTimeStamp(e)},getVideoDuration(){return new Promise(((t,e)=>{const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>{const s=i.duration;i.src="",isNaN(s)?e(new Error("Video Duratrion is not available")):t(s)},i.onerror=()=>{i.src="",e(new Error("Failed to load video"))},i.src=this.videoURL}))},backToHome(){this.$router.push("/"),this.$store.commit("removeVideoFile"),this.$store.commit("removeSubtitleFile")},setTimeFormat(){this.videoDuration<3600?(this.timeFormat="00:00:000",this.dataMaskFormat="99:99:999"):(this.timeFormat="00:00:00:000",this.dataMaskFormat="99:99:99:999")},displaySubtitle(t){this.currentSubtitle="";for(let e=0;e<this.subtitleFile.length;e++){const i=this.subtitleFile[e];t>=this.timeStampToTimeUnit(i.startTimeStamp)&&t<=this.timeStampToTimeUnit(i.endTimeStamp)&&(this.subtitleAvailable=!0,this.currentSubtitle+=i.subtitle+" ")}return!0===this.subtitleAvailable?null:(this.subtitleAvailable=!1,this.currentSubtitle="")},updateStartTimestamp(t,e){const i=this.updateLeftAndWidth(t,this.subtitleFile.find((t=>t.subtitleId===e)).endTimeStamp),s={...this.subtitleFile.find((t=>t.subtitleId===e)),startTimeStamp:t,left:i.left,width:i.width};this.$utils.updateSubtitle(s,e)},updateEndTimestamp(t,e){const i=this.updateLeftAndWidth(this.subtitleFile.find((t=>t.subtitleId===e)).startTimeStamp,t),s={...this.subtitleFile.find((t=>t.subtitleId===e)),endTimeStamp:t,left:i.left,width:i.width};this.$utils.updateSubtitle(s,e)},updateSubtitle(t,e){const i=this.subtitleFile.findIndex((t=>t.subtitleId===e));this.subtitleFile[i].subtitle=t,this.$utils.updateFile(this.subtitleFile)},addTime(t,e){if("00:00:00:000"===this.timeFormat){const[i,s,l,a]=t.split(":").map(Number),[n,o,r,d]=e.split(":").map(Number),u=3600*i*1e3+60*s*1e3+1e3*l+a+(3600*n*1e3+60*o*1e3+1e3*r+d),c=Math.floor(u/36e5),h=Math.floor(u%36e5/6e4),m=Math.floor(u%6e4/1e3),b=u%1e3,p=`${String(c).padStart(2,"0")}:${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(b).padStart(3,"0")}`;return p}{const[i,s,l]=t.split(":").map(Number),[a,n,o]=e.split(":").map(Number),r=60*i*1e3+1e3*s+l+(60*a*1e3+1e3*n+o),d=Math.floor(r/6e4),u=Math.floor(r%6e4/1e3),c=r%1e3,h=`${String(d).padStart(2,"0")}:${String(u).padStart(2,"0")}:${String(c).padStart(3,"0")}`;return h}},nextCardTime(t,e=!1,i=!1){return e?"00:00:00:000"===this.timeFormat?this.addTime(t,"00:00:00:200"):this.addTime(t,"00:00:200"):i?"00:00:00:000"===this.timeFormat?this.addTime(t,"00:00:02:200"):this.addTime(t,"00:02:200"):void 0},deleteCurrentCard(t){if(1===this.subtitleFile.length){if("00:00:00:000"===this.timeFormat){const t=this.addLeftAndWidth({startTimeStamp:"00:00:00:000",endTimeStamp:"00:00:02:000",subtitle:""});this.subtitleFile[0].startTimeStamp=t.startTimeStamp,this.subtitleFile[0].endTimeStamp=t.endTimeStamp,this.subtitleFile[0].subtitle=t.subtitle,this.subtitleFile[0].left=t.left,this.subtitleFile[0].width=t.width,this.$utils.updateFile(this.subtitleFile)}else{const t=this.addLeftAndWidth({startTimeStamp:"00:000:000",endTimeStamp:"00:02:000",subtitle:""});this.subtitleFile[0].startTimeStamp=t.startTimeStamp,this.subtitleFile[0].endTimeStamp=t.endTimeStamp,this.subtitleFile[0].subtitle=t.subtitle,this.subtitleFile[0].left=t.left,this.subtitleFile[0].width=t.width,this.$utils.updateFile(this.subtitleFile)}return this.currentFocusedCardId=null,void(this.isFocused=!1)}{this.currentFocusedCardId===t&&(this.currentFocusedCardId=null,this.isFocused=!1);const e=this.subtitleFile.findIndex((e=>e.subtitleId===t));return this.subtitleFile.splice(e,1),void this.$utils.updateFile(this.subtitleFile)}},setFocusOut(t){this.isFocused=!1,t!==this.currentFocusedCardId?this.currentFocusedCardId=null:this.currentFocusedCardId=t},setFocusIn(t){null===this.currentFocusedCardId?(this.isFocused=!0,this.$utils.updateFile(this.subtitleFile),this.currentFocusedCardId=t,this.applyshorting()):(this.isFocused=!0,this.currentFocusedCardId=t)},saveSubtitles(){this.$utils.updateFile(this.subtitleFile),this.subtitleFile.sort(((t,e)=>this.timeStampToTimeUnit(t.startTimeStamp)-this.timeStampToTimeUnit(e.startTimeStamp)))},downloadSubtitleFile(){const t=this.generateSRT(),e=new Blob([t],{type:"text/plain"}),i=window.URL.createObjectURL(e),s=document.createElement("a");s.href=i,""===this.subtitleFileName&&(this.subtitleFileName=`${this.videoFileName.split(".")[0]}.srt`),s.download=this.subtitleFileName,s.click(),window.URL.revokeObjectURL(i)},generateSRT(){let t="";return this.subtitleFile.forEach(((e,i)=>{const s=e.startTimeStamp,l=e.endTimeStamp,a=e.subtitle;t+=i+1+"\n",t+=`${s} --\x3e ${l}\n`,t+=`${a}\n\n`})),t},updateLeftAndWidth(t,e){const i=this.timeStampToTimeUnit(t),s=this.timeStampToTimeUnit(e),l=s-i,a={left:10+parseInt(i*this.viewSecondsSizeOnScale),width:parseInt(l*this.viewSecondsSizeOnScale)};return a},addLeftAndWidth(t){const e=this.timeStampToTimeUnit(t.startTimeStamp),i=this.timeStampToTimeUnit(t.endTimeStamp),s=i-e,l={...t,left:10+parseInt(e*this.viewSecondsSizeOnScale),width:parseInt(s*this.viewSecondsSizeOnScale)};return l},readSubtitleFile(){try{const t=new FileReader;t.onload=t=>{const e=t.target.result,i=e.split(/\n\s*\n/);this.subtitleFile.splice(0,this.subtitleFile.length),i.forEach((t=>{const e=t.split("\n");if(e.length>=3){const t=e[1].split(" --\x3e "),i=t[0].split(".").length-1,s=t[0].split(",").length-1,l=t[0].split(":").length-1,a=i+s+l;if(this.videoDuration<3600&&2===a)t[0]=this.replaceDotAndComma(t[0]);else{if(!(this.videoDuration>=3600&&3===a))return void alert("Invalid file formate. Please enter a valid file.");t[0]=this.replaceDotAndComma(t[0])}if(this.videoDuration<3600&&2===a)t[1]=this.replaceDotAndComma(t[1]);else{if(!(this.videoDuration>=3600&&3===a))return void alert("Invalid file formate. Please enter a valid file.");t[1]=this.replaceDotAndComma(t[1])}const n=t[0],o=t[1],r=e.slice(2).join("\n"),d=this.addLeftAndWidth({startTimeStamp:n,endTimeStamp:o,subtitle:r,subtitleId:(0,se.Z)()});this.$utils.addSubtitle(d)}}))},t.readAsText(this.selectedSubtitleFile)}catch{}},addNewCard(){const t=this.subtitleFile[this.subtitleFile.length-1]?.subtitle||"",e=this.subtitleFile[this.subtitleFile.length-1]?.endTimeStamp||"";if(""!==t){const t=this.addLeftAndWidth({startTimeStamp:this.nextCardTime(e,!0),endTimeStamp:this.nextCardTime(e,!1,!0),subtitle:"",subtitleId:(0,se.Z)()});this.$utils.addSubtitle(t)}},addNextCard(t){const e=this.subtitleFile.findIndex((e=>e.subtitleId===t)),i=this.subtitleFile[e]?.endTimeStamp||"";if(""!==this.subtitleFile[e]?.subtitle&&""!==this.subtitleFile[e+1]?.subtitle){const t=this.addLeftAndWidth({startTimeStamp:this.nextCardTime(i,!0),endTimeStamp:this.nextCardTime(i,!1,!0),subtitle:"",subtitleId:(0,se.Z)()});this.subtitleFile.splice(e+1,0,t)}this.$utils.updateFile(this.subtitleFile)}},created(){const t=this.$store.state.videoFile;this.videoFileName=t.name,this.videoFileSize=t.size,this.videoURL=t.url,this.videoDuration=t.duration,this.subtitleFileName=`${this.videoFileName.split(".")[0]}.srt`;for(let e=0;e<this.videoDuration+1;e++){const t=Math.floor(e/60),i=e%60;this.scaleSeconds.push(`${String(t).padStart(1,"0")}:${String(i).padStart(2,"0")}`)}this.setTimeFormat()},async mounted(){if(this.subtitleFile=this.$utils.getSubtitleFile(),this.viewSecondsSizeOnScale=parseInt(this.viewSecondsSizeOnScale),this.subtitleFile.forEach((t=>{const e=this.updateLeftAndWidth(t.startTimeStamp,t.endTimeStamp);t.left=e.left,t.width=e.width})),0===this.subtitleFile.length)if("00:00:000"===this.timeFormat){const t=this.addLeftAndWidth({startTimeStamp:"00:00:000",endTimeStamp:"00:02:000",subtitle:"",subtitleId:(0,se.Z)()});this.$utils.addSubtitle(t)}else{const t=this.addLeftAndWidth({startTimeStamp:"00:00:00:000",endTimeStamp:"00:00:02:000",subtitle:"",subtitleId:(0,se.Z)()});this.$utils.addSubtitle(t)}this.setFocusIn(this.subtitleFile[0].subtitleId),this.setCstPointer(0);const t=this.$refs.videoPlayer;t.addEventListener("timeupdate",(()=>{const e=t.currentTime;this.displaySubtitle(e)}))}};const ae=(0,b.Z)(le,[["render",Rt]]);var ne=ae;const oe=[{path:"/",name:"Home",component:M},{path:"/about",name:"About",component:P},{path:"/editor",name:"EditorView",component:ne}],re=(0,F.p7)({history:(0,F.PO)("/subtitle/"),routes:oe});var de=re,ue=i(65),ce=(0,ue.MT)({state:{startAgain:!1,isEditorView:!1,videoFile:{name:null,size:null,url:null,duration:null},subtitleFile:[]},getters:{},mutations:{initializeStore(t){if(localStorage.getItem("subtitleFile")&&localStorage.getItem("videoFile")){const e=localStorage.getItem("subtitleFile"),i=localStorage.getItem("videoFile");t.subtitleFile=JSON.parse(e),t.videoFile=JSON.parse(i)}},setVideoFile(t,e){t.videoFile=e;const i=JSON.stringify(e);localStorage.setItem("videoFile",i)},removeVideoFile(t){t.videoFile=null,localStorage.removeItem("videoFile")},setIsEditorView(t,e){t.isEditorView=e},readSubtitleFile(t){localStorage.getItem("subtitleFile")&&(t.subtitleFile=localStorage.getItem("subtitleFile"))},saveSubtitleFile(t,e){t.subtitleFile=e;const i=JSON.stringify(e);localStorage.setItem("subtitleFile",i)},removeSubtitleFile(t){t.subtitleFile=[],localStorage.removeItem("subtitleFile")}},actions:{},modules:{}}),he=i(932);const me=()=>{},be=()=>{const t=ce.state.subtitleFile;return t},pe=t=>{const e=ce.state.subtitleFile;for(let i=0;i<e.length;i++)if(e[i].subtitleId===t.subtitleId){e[i].startTimeStamp=t.startTimeStamp,e[i].endTimeStamp=t.endTimeStamp,e[i].subtitle=t.subtitle,e[i].left=t.left,e[i].width=t.width;break}return ce.commit("saveSubtitleFile",e),{status:!0,subtitleFile:e}},Se=t=>{const e=ce.state.subtitleFile;for(let i=0;i<e.length;i++)if(e[i].subtitleId===t){e.splice(i,1);break}return ce.commit("saveSubtitleFile",e),{status:!0,subtitleFile:e}},fe=t=>{const e=ce.state.subtitleFile;return e.push(t),ce.commit("saveSubtitleFile",e),{status:!0,subtitleFile:e}},ve=t=>{ce.commit("saveSubtitleFile",t)},ge=()=>{const t=ce.state.videoFile;return t};var Fe={createSubtitleFile:me,getSubtitleFile:be,updateSubtitle:pe,deleteSubtitle:Se,addSubtitle:fe,updateFile:ve,getVideodata:ge};i(5654);const we=(0,s.ri)(g).use(ce).use(de).use(he.Z);we.config.globalProperties.$utils=Fe,we.mount("#app")}},e={};function i(s){var l=e[s];if(void 0!==l)return l.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,l,a){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],l=t[u][1],a=t[u][2];for(var o=!0,r=0;r<s.length;r++)(!1&a||n>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[r])}))?s.splice(r--,1):(o=!1,a<n&&(n=a));if(o){t.splice(u--,1);var d=l();void 0!==d&&(e=d)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,l,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/subtitle/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var l,a,n=s[0],o=s[1],r=s[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(r)var u=r(i)}for(e&&e(s);d<n.length;d++)a=n[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(u)},s=self["webpackChunksubtitle"]=self["webpackChunksubtitle"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(6294)}));s=i.O(s)})();
//# sourceMappingURL=app.7db022d6.js.map